Version 4
SHEET 1 1304 1156
WIRE -1968 -1008 -2208 -1008
WIRE -1712 -1008 -1968 -1008
WIRE -1968 -976 -1968 -1008
WIRE -1888 -976 -1968 -976
WIRE -1712 -976 -1712 -1008
WIRE -1632 -976 -1712 -976
WIRE -1968 -960 -1968 -976
WIRE -1888 -960 -1888 -976
WIRE -1712 -960 -1712 -976
WIRE -1632 -960 -1632 -976
WIRE -1968 -864 -1968 -880
WIRE -1888 -864 -1888 -896
WIRE -1888 -864 -1968 -864
WIRE -1712 -864 -1712 -880
WIRE -1632 -864 -1632 -896
WIRE -1632 -864 -1712 -864
WIRE -2208 -800 -2208 -1008
WIRE -1968 -800 -1968 -864
WIRE -1664 -800 -1968 -800
WIRE -1504 -800 -1664 -800
WIRE -1328 -800 -1376 -800
WIRE -1264 -800 -1328 -800
WIRE -1264 -784 -1264 -800
WIRE -1712 -704 -1712 -864
WIRE -1664 -704 -1712 -704
WIRE -1504 -704 -1664 -704
WIRE -1360 -704 -1376 -704
WIRE -1264 -704 -1360 -704
WIRE -1968 -656 -1968 -800
WIRE -1888 -656 -1968 -656
WIRE -1712 -656 -1712 -704
WIRE -1632 -656 -1712 -656
WIRE -1968 -640 -1968 -656
WIRE -1712 -640 -1712 -656
WIRE -1360 -640 -1360 -704
WIRE -1888 -624 -1888 -656
WIRE -1632 -624 -1632 -656
WIRE -1968 -544 -1968 -560
WIRE -1888 -544 -1888 -560
WIRE -1888 -544 -1968 -544
WIRE -1712 -544 -1712 -560
WIRE -1632 -544 -1632 -560
WIRE -1632 -544 -1712 -544
WIRE -2208 -496 -2208 -720
WIRE -1968 -496 -1968 -544
WIRE -1968 -496 -2208 -496
WIRE -1712 -496 -1712 -544
WIRE -1712 -496 -1968 -496
WIRE -2208 -464 -2208 -496
WIRE -32 -272 -160 -272
WIRE 0 -272 -32 -272
WIRE -2176 -256 -2208 -256
WIRE -2032 -256 -2176 -256
WIRE -1952 -256 -1968 -256
WIRE -1840 -256 -1888 -256
WIRE -1808 -256 -1840 -256
WIRE -1664 -256 -1696 -256
WIRE -1648 -256 -1664 -256
WIRE -1568 -256 -1584 -256
WIRE -1472 -256 -1504 -256
WIRE -1328 -256 -1472 -256
WIRE -1296 -256 -1328 -256
WIRE -1216 -256 -1232 -256
WIRE -1200 -256 -1216 -256
WIRE -1072 -256 -1088 -256
WIRE -1024 -256 -1072 -256
WIRE -992 -256 -1024 -256
WIRE -896 -256 -928 -256
WIRE -880 -256 -896 -256
WIRE -768 -256 -816 -256
WIRE -736 -256 -768 -256
WIRE -656 -256 -672 -256
WIRE -640 -256 -656 -256
WIRE -416 -256 -464 -256
WIRE -400 -256 -416 -256
WIRE -320 -256 -400 -256
WIRE -224 -256 -256 -256
WIRE -96 -240 -160 -240
WIRE -64 -240 -80 -240
WIRE -1216 -224 -1216 -256
WIRE -2208 -208 -2208 -256
WIRE -1472 -208 -1472 -256
WIRE -1328 -208 -1344 -208
WIRE -1264 -208 -1264 -224
WIRE -1264 -208 -1328 -208
WIRE -1072 -192 -1072 -256
WIRE -1072 -192 -1184 -192
WIRE -96 -176 -96 -240
WIRE -32 -176 -96 -176
WIRE 0 -176 -32 -176
WIRE -1440 -144 -1440 -176
WIRE -1216 -144 -1216 -160
WIRE -1216 -144 -1440 -144
WIRE -400 -144 -400 -256
WIRE -80 -144 -80 -240
WIRE -80 -144 -256 -144
WIRE -64 -144 -80 -144
WIRE -2112 -80 -2128 -80
WIRE -2032 -80 -2048 -80
WIRE -2000 -80 -2000 -224
WIRE -2000 -80 -2032 -80
WIRE -880 -80 -896 -80
WIRE -768 -80 -816 -80
WIRE -704 -80 -704 -224
WIRE -704 -80 -768 -80
WIRE -288 -80 -288 -112
WIRE -2176 0 -2208 0
WIRE -2128 0 -2128 -80
WIRE -2128 0 -2176 0
WIRE -1616 0 -1616 -224
WIRE -1616 0 -2128 0
WIRE -896 0 -896 -80
WIRE -896 0 -1616 0
WIRE -2208 80 -2208 0
FLAG -2208 -464 0
FLAG -2016 -944 UP
FLAG -2016 -896 0
FLAG -2016 -624 UN
FLAG -2016 -576 0
FLAG -1760 -944 VP
FLAG -1760 -896 0
FLAG -1760 -624 VN
FLAG -1760 -576 0
FLAG -1664 -704 V
FLAG -2208 -1008 DC_P
FLAG 0 -272 UP
FLAG 0 -240 VN
FLAG 0 -144 UN
FLAG 0 -176 VP
FLAG -608 -224 DC_P
FLAG -656 -256 v*
FLAG -1360 -640 0
FLAG -2208 160 0
FLAG -1664 -256 om*
FLAG -1328 -256 tm*_p
FLAG -1328 -208 tm*_i
FLAG -2176 0 om
FLAG -2208 -128 0
FLAG -1024 -256 tm*
FLAG -1328 -800 TM
FLAG -1664 -800 U
FLAG -288 0 0
FLAG -416 -256 m*
FLAG -288 -224 0
FLAG -2032 -80 pm
FLAG -2176 -256 pm*
FLAG -1840 -256 om*_p
FLAG -768 -80 v#_emf
FLAG -896 -256 i*
FLAG -768 -256 v*_re
SYMBOL voltage -2208 -816 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL diode -1904 -896 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL sw -1968 -864 M180
SYMATTR InstName S1
SYMBOL sw -1968 -544 M180
SYMATTR InstName S2
SYMBOL sw -1712 -864 M180
SYMATTR InstName S3
SYMBOL sw -1712 -544 M180
SYMATTR InstName S4
SYMBOL diode -1904 -560 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMBOL diode -1648 -896 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMBOL diode -1648 -560 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMBOL add -720 -224 R0
SYMATTR InstName U15
SYMBOL bv -2208 64 R0
SYMATTR InstName B3
SYMATTR Value V=I(V4)
SYMBOL voltage -1264 -800 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value SINE(0 1m 10)
SYMBOL sub -1632 -224 R0
SYMATTR InstName U29
SYMBOL Proportional -1552 -224 R0
SYMATTR Value K=10m
SYMATTR InstName U33
SYMBOL add -1280 -224 R0
SYMATTR InstName U34
SYMBOL voltage -2208 -224 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V5
SYMATTR Value PULSE({0*pi} {100*pi} 0 1n 1n 2.5 5)
SYMBOL Proportional -864 -224 R0
SYMATTR Value K=3
SYMATTR InstName U35
SYMBOL LTspiceControlLibrary\\Motors\\DCMotor -1376 -752 R0
SYMATTR InstName U5
SYMBOL Proportional -864 -48 R0
SYMATTR Value K=0.01
SYMATTR InstName U4
SYMBOL LTspiceControlLibrary\\Math\\Operands\\div -624 -224 R0
SYMATTR InstName U3
SYMBOL nle -304 -112 R0
SYMATTR InstName U1
SYMBOL TriangleWaveVoltage -288 -96 R0
SYMATTR InstName U2
SYMATTR Value V1=0 V2=1 Tperiod=1/1k tratio=1
SYMBOL nle -304 -224 R0
SYMATTR InstName U7
SYMBOL LTspiceControlLibrary\\Math\\Operands\\and -48 -272 M180
SYMATTR InstName U9
SYMBOL LTspiceControlLibrary\\Math\\Operands\\and -48 -176 M180
SYMATTR InstName U10
SYMBOL LTspiceControlLibrary\\Math\\Functions\\abs -384 -112 R0
SYMATTR InstName U11
SYMBOL LTspiceControlLibrary\\TransferFunctions\\Integral -1392 -176 R0
SYMATTR Value T=0.1
SYMATTR InstName U6
SYMBOL LTspiceControlLibrary\\Math\\Functions\\limit -1184 -224 R0
WINDOW 3 0 0 Left 2
SYMATTR Value y=-z z=10m
SYMATTR InstName U12
SYMBOL LTspiceControlLibrary\\Math\\Operands\\sub -1184 -208 M90
SYMATTR InstName U13
SYMBOL sub -1456 -176 R0
SYMATTR InstName U14
SYMBOL LTspiceControlLibrary\\TransferFunctions\\Integral -2096 -48 R0
SYMATTR InstName U16
SYMBOL LTspiceControlLibrary\\Math\\Operands\\sub -2016 -224 R0
SYMATTR InstName U17
SYMBOL LTspiceControlLibrary\\Math\\Functions\\limit -1792 -224 R0
WINDOW 3 0 0 Left 2
SYMATTR Value y=-z z=300
SYMATTR InstName U18
SYMBOL Proportional -1936 -224 R0
SYMATTR Value K=5
SYMATTR InstName U19
SYMBOL Proportional -976 -224 R0
SYMATTR Value K=1/0.01
SYMATTR InstName U20
SYMBOL LTspiceControlLibrary\\Math\\Functions\\limit -560 -224 R0
WINDOW 3 0 0 Left 2
SYMATTR Value y=-z z=1+1m
SYMATTR InstName U21
SYMBOL LTspiceControlLibrary\\PulseModulations\\ComplementaryBufferWithDeadtime -224 -320 R0
SYMATTR InstName U22
SYMATTR Value Tdead=1m
TEXT -2216 -1184 Left 2 !.tran 10 startup
TEXT -2216 -1152 Left 2 !.model SW SW(Ron=1 Roff=1Meg Vt=0.5)\n.model D D(Ron=.1 Roff=1Meg Vfwd=.4)
TEXT -2256 -1224 Left 4 ;Config
TEXT -2296 -1280 Left 5 ;DC Motor Position Control
TEXT -2256 -1088 Left 4 ;Circuit
TEXT -2248 -392 Left 4 ;Controller
TEXT -1456 -1072 Left 2 ;Analogy between\nElectric Circuit  - Rotating Machinery\nQ: charge - Pm: angle\nI: current - Om: angular velocity\nV: voltage - Tm: torque\nR: resistance - Dm: viscous resistance\nL: inductance - Jm: moment of inertia\nC: capacitance - Km: torsion coefficient
TEXT -2024 -312 Left 2 ;position controller
TEXT -1192 -768 Left 2 ;disturbance torque
TEXT -312 -176 Left 2 ;PWM
TEXT -1616 -312 Left 2 ;speed controller
TEXT -1392 -120 Left 2 ;antiwindup
TEXT -968 -128 Left 2 ;EMF compensation
TEXT -360 -304 Left 2 ;direction
